$(window).on('load', function () {
    $('.km-thumbnail').removeAttr('hidden');
    $('.loading').hide();

    /* $('.km-thumbnail').each(function () { 
        var image = $(this);
        var container = image.parent('.thumbnail-container');
        var spinner = container.find('.loading');
        
        spinner.show();
        
        if (image.prop('complete')) {
            spinner.hide();
            image.removeAttr('hidden');            
        }
        
        image.on('error', function() {            
            spinner.hide();           
        });

        setTimeout(function() {
            spinner.hide();
            image.removeAttr('hidden');            
        }, 500);
    }); */
});

$(document).ready(function () {

    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });

    const mangaSwiper = new Swiper('.swiper-panel', {
        speed: 400,
        keyboard: true,
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        lazy: true,
        history: {
            key: "baca",
        },
    });

    const swiper = new Swiper('.banner-swiper', {
        speed: 400,

        pagination:{
            el: '.swiper-pagination',
            type: 'bullets',
            clickable: true,
            dynamicBullets: true,
            enabled: false,
        },

        autoplay:{
            delay: 4000,
            disableOnInteraction: false,
        },

        breakpoints: {
            // when window width is >= 320px
            320: {
              pagination:{
                enabled: false,
              },
            },
            // when window width is >= 480px
            480: {
                pagination:{
                    enabled: true,
                  },
            },
        }
    });
    
    const swiperFantasy = new Swiper('.swiper-manga', {
        slidesPerView: 'auto',
        mousewheel: true,
        spaceBetween: 30,
        freeMode: true,        

        scrollbar: {
            el: '.swiper-scrollbar',
            draggable: true,
        },
    });

    $('#pilih-semua').click(function() {
        $('.checkbox-item').prop('checked', $(this).prop('checked'));
        checkSelected();
    });

    function checkSelected() {
        // Ambil jumlah checkbox yang dicentang
        var checked = $('.checkbox-item:checked').length;
    
        // Jika tidak ada checkbox yang dicentang, nonaktifkan tombol
        if (checked === 0) {
          $('#dltBtnItms').prop('disabled', true);
        } else {
          $('#dltBtnItms').prop('disabled', false);
        }
    }

    $('.checkbox-item').change(function() {
        checkSelected();
    });
    
    checkSelected();


    $('#editProfilePic').change(function(event) {
        const [file] = event.target.files;
        if (file) {
            $('#txtImage').hide();
            $('#previewImage').attr('src', URL.createObjectURL(file));
            $("#previewImage").removeAttr("hidden");          
        }
    });
});